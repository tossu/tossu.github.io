<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8" />
    <title>Saiturin käsikirja - Laskurit</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" href="css/normalize.css" />

    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/calculators.css" />
    <link rel="stylesheet" href="css/utils.css" />


    <script>

        function acquisitionCostResult(sellPrice, buyPrice, percent) {
            const value = sellPrice - (sellPrice * percent);
            const taxPercent = value > 30_000 ? 0.34 : 0.3;
            const tax = value * taxPercent;

            const normalTax = (sellPrice - buyPrice) > 30_000 ? 0.34 : 0.3;
            const normalTaxValue = (sellPrice - buyPrice) * normalTax; 

            const acquisitionCostResult = `${sellPrice}€ - ( ${sellPrice}€ * ${percent} ) = ${value}€\n${value}€ * ${taxPercent} = ${tax}€`;
            const normalTaxResult = `(${sellPrice}€ - ${buyPrice}€) * ${normalTax} = ${normalTaxValue}€`;

            if (buyPrice != null) {
                return acquisitionCostResult + "\n\n" + normalTaxResult;
            }

            return acquisitionCostResult;
        }


        function acquisitionCostValues() {
            const sellPriceElement = document.getElementById("acquisition-cost-sell-price");
            const overTenYearsElement = document.getElementById("acquisition-cost-over-ten-years");
            const buyPriceElement = document.getElementById("acquisition-cost-buy-price");

            return {
                sellPrice: parseFloat(sellPriceElement.value),
                buyPrice: parseFloat(buyPriceElement.value) || undefined,
                percent: overTenYearsElement.checked ? 0.4 : 0.2,
            }

        }

        function acquisitionCost() {
            const { sellPrice, buyPrice, percent } = acquisitionCostValues();
            const result = acquisitionCostResult(sellPrice, buyPrice, percent);
            const resultElement = document.getElementById("acquisition-cost-result");
            resultElement.innerHTML = result;
        }


    </script>

</head>

<body>

    <div id="container">

        <div id="header">
            <h1>Laskurit</h1>
            <small>Laskemalla se selviää</small>
        </div>

        <div id="toc">
            <ul>
                <li><a href="#hankintameno-olettama">Hankinta-olettama</a></li>
            </ul>
        </div>

        <div id="content">


            <h2><a href="#hankintameno-olettama" name="hankintameno-olettama">Hankinta-olettama</a></h2>

            <form onsubmit="event.preventDefault();javascript:acquisitionCost()">

                <div class="pb-1 pt-1 d-flex flex-column">
                    <label for="acquisition-cost-buy-price">Ostohinta (vapaaehtoinen)</label>
                    <input type="number" id="acquisition-cost-buy-price" />
                </div>

                <div class="pb-1 d-flex flex-column">
                    <label for="acquisition-cost-sell-price">Myyntihinta</label>
                    <input type="number" id="acquisition-cost-sell-price" required />
                </div>

                <div class="d-flex flex-row">
                    <label for="acquisition-cost-over-ten-years">Yli kymmenen vuotta
                        <input id="acquisition-cost-over-ten-years" type="checkbox" value="true" checked/>
                    </label>
                </div>

                <div class="pb-1 pt-1">
                    <button class="button" type="submit">Laske</button>
                </div>

                <div class="pb-1">
                    <pre><code id="acquisition-cost-result">Tulos</code></pre>
                </div>

            </form>

        </div>

</body>

</html>